{
  "version": 4,
  "terraform_version": "1.13.4",
  "serial": 55,
  "lineage": "f3d50250-089e-0b36-a776-d29018b5c674",
  "outputs": {
    "api_base_url": {
      "value": "https://rjmzoavoel.execute-api.us-west-2.amazonaws.com/prod",
      "type": "string"
    },
    "artifacts_bucket": {
      "value": "kagent-artifacts",
      "type": "string"
    },
    "dynamodb_table": {
      "value": "Runs",
      "type": "string"
    },
    "ecr_repository_url": {
      "value": "958923398556.dkr.ecr.us-west-2.amazonaws.com/kaggle-runner",
      "type": "string"
    },
    "state_machine_arn": {
      "value": "arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "archive_file",
      "name": "mark_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "e882ca0b34589f931ed5ea9630ba80c499f070e3",
            "output_base64sha256": "68mYxM12X5mWH5SQkqH5JUjF0cUB4RWUZxZvEAHKX4k=",
            "output_base64sha512": "O6AKA9qwKcjPwLhUVnMsEpaZG/q05Oj+PRns42tthUAJ7pKBVm+Kq4LmBg2XNaD6etBerghQeZ7tCupqDJHQcg==",
            "output_file_mode": null,
            "output_md5": "bde1e606d965a7bc98ae8fbd2791b85a",
            "output_path": "./build/mark_succeeded.zip",
            "output_sha": "e882ca0b34589f931ed5ea9630ba80c499f070e3",
            "output_sha256": "ebc998c4cd765f99961f949092a1f92548c5d1c501e1159467166f1001ca5f89",
            "output_sha512": "3ba00a03dab029c8cfc0b85456732c1296991bfab4e4e8fe3d19ece36b6d854009ee9281566f8aab82e6060d9735a0fa7ad05eae0850799eed0aea6a0c91d072",
            "output_size": 776,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "./../lambdas/lambda_mark_succeeded.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "plan_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "1e7f18fb64c0c53de64f2a8f8725a4ee7af4a6ec",
            "output_base64sha256": "oqWbN2nPtbhSBuIKvyVv0bLum9UtLJsufLIf/SCG1eM=",
            "output_base64sha512": "38s0wxKiS6vWOhjM9Bq9rwDK1XxMUQDXY7x+BwCVGDF6VpZPtpoFf5DikUs2gFyUrTULdcANRN4YTajDzNbzzw==",
            "output_file_mode": null,
            "output_md5": "a782801f962d55f3fbf09c08629aa401",
            "output_path": "./build/plan.zip",
            "output_sha": "1e7f18fb64c0c53de64f2a8f8725a4ee7af4a6ec",
            "output_sha256": "a2a59b3769cfb5b85206e20abf256fd1b2ee9bd52d2c9b2e7cb21ffd2086d5e3",
            "output_sha512": "dfcb34c312a24babd63a18ccf41abdaf00cad57c4c5100d763bc7e07009518317a56964fb69a057f90e2914b36805c94ad350b75c00d44de184da8c3ccd6f3cf",
            "output_size": 819,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "./../lambdas/lambda_plan.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "start_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "b55f9135d612dc0994714421f8a774dd9abd6854",
            "output_base64sha256": "YJeO5NpZmOyggf7JYglOyq/TRdzkzKyMKajutdWory4=",
            "output_base64sha512": "WUNpPgQfhvPmayBhkTyjddsvmA0PDtLSP04Tc1QY8r3Gp9DuMDBDFhT6Q1oO+z/nMcCw03Cbj8Og7Ter1wt5sA==",
            "output_file_mode": null,
            "output_md5": "22706b230c95f9409068a7c59671642a",
            "output_path": "./build/start_run.zip",
            "output_sha": "b55f9135d612dc0994714421f8a774dd9abd6854",
            "output_sha256": "60978ee4da5998eca081fec962094ecaafd345dce4ccac8c29a8eeb5d5a8af2e",
            "output_sha512": "5943693e041f86f3e66b2061913ca375db2f980d0f0ed2d23f4e13735418f2bdc6a7d0ee3030431614fa435a0efb3fe731c0b0d3709b8fc3a0ed37abd70b79b0",
            "output_size": 670,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "./../lambdas/lambda_start_run.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "validate_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "5d543e456ea7a80af1cf370d65b5ef1a0aa66136",
            "output_base64sha256": "ybMSkRglE3s+1Ids22rWK1aJptJskXjTH7m/MLysbmY=",
            "output_base64sha512": "4iQ/esKTwn5FmMar18qMfd8b8YP6FRkirXnSL6lB1yv8/GVsipaaKRO3xHr8DnLP22Lbj/lhM8bv4GKSR2At2g==",
            "output_file_mode": null,
            "output_md5": "ee28d571ee0220b5200c63b107abb074",
            "output_path": "./build/validate_output.zip",
            "output_sha": "5d543e456ea7a80af1cf370d65b5ef1a0aa66136",
            "output_sha256": "c9b312911825137b3ed4876cdb6ad62b5689a6d26c9178d31fb9bf30bcac6e66",
            "output_sha512": "e2243f7ac293c27e4598c6abd7ca8c7ddf1bf183fa151922ad79d22fa941d72bfcfc656c8a969a2913b7c47afc0e72cfdb62db8ff96133c6efe0629247602dda",
            "output_size": 475,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "./../lambdas/lambda_validate_output.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_ecs_tasks",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1077804475",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "ecs-tasks.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2690255455",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_states",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4022981484",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"states.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "states.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "ecs_task_role_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2013364844",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObjectAcl\",\n        \"s3:PutObject\"\n      ],\n      \"Resource\": \"arn:aws:s3:::kagent-artifacts/runs/*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"dynamodb:UpdateItem\",\n        \"dynamodb:GetItem\"\n      ],\n      \"Resource\": \"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ssm:GetParameters\",\n        \"ssm:GetParameterHistory\",\n        \"ssm:GetParameter\"\n      ],\n      \"Resource\": [\n        \"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username\",\n        \"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"s3:PutObjectAcl\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"},{\"Effect\":\"Allow\",\"Action\":[\"dynamodb:UpdateItem\",\"dynamodb:GetItem\"],\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Effect\":\"Allow\",\"Action\":[\"ssm:GetParameters\",\"ssm:GetParameterHistory\",\"ssm:GetParameter\"],\"Resource\":[\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username\",\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key\"]},{\"Effect\":\"Allow\",\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Resource\":\"*\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "s3:PutObject",
                  "s3:PutObjectAcl"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:s3:::kagent-artifacts/runs/*"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "dynamodb:GetItem",
                  "dynamodb:UpdateItem"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:us-west-2:958923398556:table/Runs"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "ssm:GetParameter",
                  "ssm:GetParameterHistory",
                  "ssm:GetParameters"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key",
                  "arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3546645223",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Resource\":\"*\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_mark_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2890384934",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"dynamodb:UpdateItem\",\n      \"Resource\": \"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::kagent-artifacts/runs/*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ses:SendRawEmail\",\n        \"ses:SendEmail\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"dynamodb:UpdateItem\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Effect\":\"Allow\",\"Action\":\"s3:GetObject\",\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"},{\"Effect\":\"Allow\",\"Action\":[\"ses:SendRawEmail\",\"ses:SendEmail\"],\"Resource\":\"*\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:UpdateItem"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:us-west-2:958923398556:table/Runs"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "s3:GetObject"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:s3:::kagent-artifacts/runs/*"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "ses:SendEmail",
                  "ses:SendRawEmail"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_plan_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2552869852",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"dynamodb:UpdateItem\",\n      \"Resource\": \"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"dynamodb:UpdateItem\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:UpdateItem"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:us-west-2:958923398556:table/Runs"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_start_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1745458962",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"dynamodb:PutItem\",\n      \"Resource\": \"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"states:StartExecution\",\n      \"Resource\": \"arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"dynamodb:PutItem\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Effect\":\"Allow\",\"Action\":\"states:StartExecution\",\"Resource\":\"arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:PutItem"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:us-west-2:958923398556:table/Runs"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "states:StartExecution"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_validate_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2039266567",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::kagent-artifacts/runs/*\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"s3:GetObject\",\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "s3:GetObject"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:s3:::kagent-artifacts/runs/*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "sfn_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1251360904",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"lambda:InvokeFunction\",\n      \"Resource\": [\n        \"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput\",\n        \"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan\",\n        \"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ecs:RunTask\",\n        \"ecs:DescribeTasks\"\n      ],\n      \"Resource\": \"arn:aws:ecs:us-west-2:958923398556:task-definition/kaggle-agent-runner:1\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"iam:PassRole\",\n      \"Resource\": [\n        \"arn:aws:iam::958923398556:role/kaggle-agent-ecs-task-role\",\n        \"arn:aws:iam::958923398556:role/kaggle-agent-ecs-execution-role\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\",\n        \"events:PutTargets\",\n        \"events:PutRule\",\n        \"events:DescribeRule\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"lambda:InvokeFunction\",\"Resource\":[\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput\",\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan\",\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded\"]},{\"Effect\":\"Allow\",\"Action\":[\"ecs:RunTask\",\"ecs:DescribeTasks\"],\"Resource\":\"arn:aws:ecs:us-west-2:958923398556:task-definition/kaggle-agent-runner:1\"},{\"Effect\":\"Allow\",\"Action\":\"iam:PassRole\",\"Resource\":[\"arn:aws:iam::958923398556:role/kaggle-agent-ecs-task-role\",\"arn:aws:iam::958923398556:role/kaggle-agent-ecs-execution-role\"]},{\"Effect\":\"Allow\",\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\",\"events:PutTargets\",\"events:PutRule\",\"events:DescribeRule\"],\"Resource\":\"*\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "lambda:InvokeFunction"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded",
                  "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan",
                  "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "ecs:DescribeTasks",
                  "ecs:RunTask"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:ecs:us-west-2:958923398556:task-definition/kaggle-agent-runner:1"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "iam:PassRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::958923398556:role/kaggle-agent-ecs-execution-role",
                  "arn:aws:iam::958923398556:role/kaggle-agent-ecs-task-role"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "events:DescribeRule",
                  "events:PutRule",
                  "events:PutTargets",
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_subnets",
      "name": "default_vpc_subnets",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filter": [
              {
                "name": "vpc-id",
                "values": [
                  "vpc-0638d36bc9e3d188c"
                ]
              }
            ],
            "id": "us-west-2",
            "ids": [
              "subnet-074058b75683e9e47",
              "subnet-062d15d643688fe16",
              "subnet-0246ec6f6461eac24",
              "subnet-0d44b2603cc66ce95"
            ],
            "tags": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_vpc",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-west-2:958923398556:vpc/vpc-0638d36bc9e3d188c",
            "cidr_block": "172.31.0.0/16",
            "cidr_block_associations": [
              {
                "association_id": "vpc-cidr-assoc-097bf604679cfc216",
                "cidr_block": "172.31.0.0/16",
                "state": "associated"
              }
            ],
            "default": true,
            "dhcp_options_id": "dopt-087641089981b1754",
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "enable_network_address_usage_metrics": false,
            "filter": null,
            "id": "vpc-0638d36bc9e3d188c",
            "instance_tenancy": "default",
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "main_route_table_id": "rtb-0732af434efbeccbf",
            "owner_id": "958923398556",
            "state": null,
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_api",
      "name": "http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_endpoint": "https://rjmzoavoel.execute-api.us-west-2.amazonaws.com",
            "api_key_selection_expression": "$request.header.x-api-key",
            "arn": "arn:aws:apigateway:us-west-2::/apis/rjmzoavoel",
            "body": null,
            "cors_configuration": [],
            "credentials_arn": null,
            "description": "",
            "disable_execute_api_endpoint": false,
            "execution_arn": "arn:aws:execute-api:us-west-2:958923398556:rjmzoavoel",
            "fail_on_warnings": null,
            "id": "rjmzoavoel",
            "ip_address_type": "ipv4",
            "name": "kaggle-agent-api",
            "protocol_type": "HTTP",
            "route_key": null,
            "route_selection_expression": "$request.method $request.path",
            "tags": {},
            "tags_all": {},
            "target": null,
            "version": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_integration",
      "name": "start_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "rjmzoavoel",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling_strategy": "",
            "credentials_arn": "",
            "description": "",
            "id": "90q35lm",
            "integration_method": "POST",
            "integration_response_selection_expression": "",
            "integration_subtype": "",
            "integration_type": "AWS_PROXY",
            "integration_uri": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-StartRun/invocations",
            "passthrough_behavior": "",
            "payload_format_version": "2.0",
            "request_parameters": {},
            "request_templates": {},
            "response_parameters": [],
            "template_selection_expression": "",
            "timeout_milliseconds": 30000,
            "tls_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.http",
            "aws_cloudwatch_log_group.ecs",
            "aws_dynamodb_table.runs",
            "aws_ecr_repository.runner",
            "aws_ecs_cluster.this",
            "aws_ecs_task_definition.runner",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role",
            "aws_iam_role.lambda_mark_role",
            "aws_iam_role.lambda_plan_role",
            "aws_iam_role.lambda_start_role",
            "aws_iam_role.lambda_validate_role",
            "aws_iam_role.sfn_role",
            "aws_lambda_function.mark_succeeded",
            "aws_lambda_function.plan",
            "aws_lambda_function.start_run",
            "aws_lambda_function.validate_output",
            "aws_s3_bucket.artifacts",
            "aws_sfn_state_machine.kagent",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.archive_file.mark_zip",
            "data.archive_file.plan_zip",
            "data.archive_file.start_zip",
            "data.archive_file.validate_zip",
            "data.aws_iam_policy_document.assume_ecs_tasks",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.assume_states",
            "data.aws_subnets.default_vpc_subnets",
            "data.aws_vpc.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_route",
      "name": "run_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "rjmzoavoel",
            "api_key_required": false,
            "authorization_scopes": [],
            "authorization_type": "NONE",
            "authorizer_id": "",
            "id": "kogbv62",
            "model_selection_expression": "",
            "operation_name": "",
            "request_models": {},
            "request_parameter": [],
            "route_key": "POST /run",
            "route_response_selection_expression": "",
            "target": "integrations/90q35lm"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.http",
            "aws_apigatewayv2_integration.start_integration",
            "aws_cloudwatch_log_group.ecs",
            "aws_dynamodb_table.runs",
            "aws_ecr_repository.runner",
            "aws_ecs_cluster.this",
            "aws_ecs_task_definition.runner",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role",
            "aws_iam_role.lambda_mark_role",
            "aws_iam_role.lambda_plan_role",
            "aws_iam_role.lambda_start_role",
            "aws_iam_role.lambda_validate_role",
            "aws_iam_role.sfn_role",
            "aws_lambda_function.mark_succeeded",
            "aws_lambda_function.plan",
            "aws_lambda_function.start_run",
            "aws_lambda_function.validate_output",
            "aws_s3_bucket.artifacts",
            "aws_sfn_state_machine.kagent",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.archive_file.mark_zip",
            "data.archive_file.plan_zip",
            "data.archive_file.start_zip",
            "data.archive_file.validate_zip",
            "data.aws_iam_policy_document.assume_ecs_tasks",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.assume_states",
            "data.aws_subnets.default_vpc_subnets",
            "data.aws_vpc.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_stage",
      "name": "prod",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_log_settings": [],
            "api_id": "rjmzoavoel",
            "arn": "arn:aws:apigateway:us-west-2::/apis/rjmzoavoel/stages/prod",
            "auto_deploy": true,
            "client_certificate_id": "",
            "default_route_settings": [
              {
                "data_trace_enabled": false,
                "detailed_metrics_enabled": false,
                "logging_level": "",
                "throttling_burst_limit": 0,
                "throttling_rate_limit": 0
              }
            ],
            "deployment_id": "heh7zx",
            "description": "",
            "execution_arn": "arn:aws:execute-api:us-west-2:958923398556:rjmzoavoel/prod",
            "id": "prod",
            "invoke_url": "https://rjmzoavoel.execute-api.us-west-2.amazonaws.com/prod",
            "name": "prod",
            "route_settings": [],
            "stage_variables": {},
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.http"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "ecs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-west-2:958923398556:log-group:/aws/ecs/kaggle-agent",
            "id": "/aws/ecs/kaggle-agent",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/ecs/kaggle-agent",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambdas",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-west-2:958923398556:log-group:/aws/lambda/kaggle-agent",
            "id": "/aws/lambda/kaggle-agent",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/lambda/kaggle-agent",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "runs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-west-2:958923398556:table/Runs",
            "attribute": [
              {
                "name": "run_id",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [],
            "hash_key": "run_id",
            "id": "Runs",
            "import_table": [],
            "local_secondary_index": [],
            "name": "Runs",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false,
                "recovery_period_in_days": 0
              }
            ],
            "range_key": null,
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecr_repository",
      "name": "runner",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecr:us-west-2:958923398556:repository/kaggle-runner",
            "encryption_configuration": [
              {
                "encryption_type": "AES256",
                "kms_key": ""
              }
            ],
            "force_delete": null,
            "id": "kaggle-runner",
            "image_scanning_configuration": [
              {
                "scan_on_push": false
              }
            ],
            "image_tag_mutability": "MUTABLE",
            "name": "kaggle-runner",
            "registry_id": "958923398556",
            "repository_url": "958923398556.dkr.ecr.us-west-2.amazonaws.com/kaggle-runner",
            "tags": {},
            "tags_all": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxMjAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_cluster",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:us-west-2:958923398556:cluster/kaggle-agent-cluster",
            "configuration": [],
            "id": "arn:aws:ecs:us-west-2:958923398556:cluster/kaggle-agent-cluster",
            "name": "kaggle-agent-cluster",
            "service_connect_defaults": [],
            "setting": [
              {
                "name": "containerInsights",
                "value": "enabled"
              }
            ],
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "runner",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ecs:us-west-2:958923398556:task-definition/kaggle-agent-runner:1",
            "arn_without_revision": "arn:aws:ecs:us-west-2:958923398556:task-definition/kaggle-agent-runner",
            "container_definitions": "[{\"command\":[\"python\",\"/app/runner_main.py\"],\"environment\":[{\"name\":\"DDB_TABLE\",\"value\":\"Runs\"},{\"name\":\"S3_BUCKET\",\"value\":\"kagent-artifacts\"}],\"essential\":true,\"image\":\"958923398556.dkr.ecr.us-west-2.amazonaws.com/kaggle-runner:1\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/aws/ecs/kaggle-agent\",\"awslogs-region\":\"us-west-2\",\"awslogs-stream-prefix\":\"runner\"}},\"mountPoints\":[],\"name\":\"runner\",\"portMappings\":[],\"secrets\":[{\"name\":\"KAGGLE_KEY\",\"valueFrom\":\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key\"},{\"name\":\"KAGGLE_USERNAME\",\"valueFrom\":\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username\"}],\"systemControls\":[],\"volumesFrom\":[]}]",
            "cpu": "1024",
            "enable_fault_injection": false,
            "ephemeral_storage": [],
            "execution_role_arn": "arn:aws:iam::958923398556:role/kaggle-agent-ecs-execution-role",
            "family": "kaggle-agent-runner",
            "id": "kaggle-agent-runner",
            "inference_accelerator": [],
            "ipc_mode": "",
            "memory": "2048",
            "network_mode": "awsvpc",
            "pid_mode": "",
            "placement_constraints": [],
            "proxy_configuration": [],
            "requires_compatibilities": [
              "FARGATE"
            ],
            "revision": 1,
            "runtime_platform": [],
            "skip_destroy": false,
            "tags": {},
            "tags_all": {},
            "task_role_arn": "arn:aws:iam::958923398556:role/kaggle-agent-ecs-task-role",
            "track_latest": false,
            "volume": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_cloudwatch_log_group.ecs",
            "aws_dynamodb_table.runs",
            "aws_ecr_repository.runner",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role",
            "aws_s3_bucket.artifacts",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.aws_iam_policy_document.assume_ecs_tasks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_task_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::958923398556:role/kaggle-agent-ecs-execution-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-10-27T20:15:34Z",
            "description": "",
            "force_detach_policies": false,
            "id": "kaggle-agent-ecs-execution-role",
            "inline_policy": [
              {
                "name": "ecs-execution-ssm-access",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:GetParameterHistory\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username\",\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key\"]}]}"
              },
              {
                "name": "kaggle-agent-ecs-exec-ssm",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:GetParameterHistory\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username\",\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key\"]}]}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
            ],
            "max_session_duration": 3600,
            "name": "kaggle-agent-ecs-execution-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA56RCJ3WOEQKDOKTWU"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_ecs_tasks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_task_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::958923398556:role/kaggle-agent-ecs-task-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-10-27T20:15:34Z",
            "description": "",
            "force_detach_policies": false,
            "id": "kaggle-agent-ecs-task-role",
            "inline_policy": [
              {
                "name": "kaggle-agent-ecs-task-role-perm",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:PutObjectAcl\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"},{\"Action\":[\"dynamodb:UpdateItem\",\"dynamodb:GetItem\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Action\":[\"ssm:GetParameters\",\"ssm:GetParameterHistory\",\"ssm:GetParameter\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username\",\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key\"]},{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "kaggle-agent-ecs-task-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA56RCJ3WONHTAG64XE"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_ecs_tasks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_mark_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::958923398556:role/kaggle-agent-lambda-mark-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-10-27T20:15:34Z",
            "description": "",
            "force_detach_policies": false,
            "id": "kaggle-agent-lambda-mark-role",
            "inline_policy": [
              {
                "name": "kaggle-agent-lambda-mark-logs",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              },
              {
                "name": "kaggle-agent-lambda-mark-perm",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"dynamodb:UpdateItem\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"},{\"Action\":[\"ses:SendRawEmail\",\"ses:SendEmail\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "kaggle-agent-lambda-mark-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA56RCJ3WOHGLWLAANA"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_plan_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::958923398556:role/kaggle-agent-lambda-plan-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-10-27T20:15:34Z",
            "description": "",
            "force_detach_policies": false,
            "id": "kaggle-agent-lambda-plan-role",
            "inline_policy": [
              {
                "name": "kaggle-agent-lambda-plan-logs",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              },
              {
                "name": "kaggle-agent-lambda-plan-perm",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"dynamodb:UpdateItem\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "kaggle-agent-lambda-plan-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA56RCJ3WOJU5JXCS66"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_start_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::958923398556:role/kaggle-agent-lambda-start-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-10-27T20:15:34Z",
            "description": "",
            "force_detach_policies": false,
            "id": "kaggle-agent-lambda-start-role",
            "inline_policy": [
              {
                "name": "kaggle-agent-lambda-start-logs",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              },
              {
                "name": "kaggle-agent-lambda-start-perm",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"dynamodb:PutItem\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Action\":\"states:StartExecution\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "kaggle-agent-lambda-start-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA56RCJ3WOGCVEIXDOC"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_validate_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::958923398556:role/kaggle-agent-lambda-validate-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-10-27T20:15:34Z",
            "description": "",
            "force_detach_policies": false,
            "id": "kaggle-agent-lambda-validate-role",
            "inline_policy": [
              {
                "name": "kaggle-agent-lambda-validate-logs",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              },
              {
                "name": "kaggle-agent-lambda-validate-perm",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "kaggle-agent-lambda-validate-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA56RCJ3WOIZ3732QPM"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "sfn_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::958923398556:role/kaggle-agent-sfn-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-10-27T20:15:34Z",
            "description": "",
            "force_detach_policies": false,
            "id": "kaggle-agent-sfn-role",
            "inline_policy": [
              {
                "name": "kaggle-agent-sfn-perm",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"lambda:InvokeFunction\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput\",\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan\",\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded\"]},{\"Action\":[\"ecs:RunTask\",\"ecs:DescribeTasks\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:ecs:us-west-2:958923398556:task-definition/kaggle-agent-runner:1\"},{\"Action\":\"iam:PassRole\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:iam::958923398556:role/kaggle-agent-ecs-task-role\",\"arn:aws:iam::958923398556:role/kaggle-agent-ecs-execution-role\"]},{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\",\"events:PutTargets\",\"events:PutRule\",\"events:DescribeRule\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "kaggle-agent-sfn-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA56RCJ3WOFAQ2ZOA4A"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_states"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "ecs_exec_ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-ecs-execution-role:kaggle-agent-ecs-exec-ssm",
            "name": "kaggle-agent-ecs-exec-ssm",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:GetParameterHistory\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username\",\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key\"]}]}",
            "role": "kaggle-agent-ecs-execution-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.ecs_task_execution_role",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.aws_iam_policy_document.assume_ecs_tasks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "ecs_task_role_perm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-ecs-task-role:kaggle-agent-ecs-task-role-perm",
            "name": "kaggle-agent-ecs-task-role-perm",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:PutObjectAcl\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"},{\"Action\":[\"dynamodb:UpdateItem\",\"dynamodb:GetItem\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Action\":[\"ssm:GetParameters\",\"ssm:GetParameterHistory\",\"ssm:GetParameter\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username\",\"arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key\"]},{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "kaggle-agent-ecs-task-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.runs",
            "aws_iam_role.ecs_task_role",
            "aws_s3_bucket.artifacts",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.aws_iam_policy_document.assume_ecs_tasks",
            "data.aws_iam_policy_document.ecs_task_role_permissions"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_mark_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-lambda-mark-role:kaggle-agent-lambda-mark-logs",
            "name": "kaggle-agent-lambda-mark-logs",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "kaggle-agent-lambda-mark-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_mark_role",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.lambda_logs"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_mark_perm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-lambda-mark-role:kaggle-agent-lambda-mark-perm",
            "name": "kaggle-agent-lambda-mark-perm",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"dynamodb:UpdateItem\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"},{\"Action\":[\"ses:SendRawEmail\",\"ses:SendEmail\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "kaggle-agent-lambda-mark-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.runs",
            "aws_iam_role.lambda_mark_role",
            "aws_s3_bucket.artifacts",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.lambda_mark_permissions"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_plan_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-lambda-plan-role:kaggle-agent-lambda-plan-logs",
            "name": "kaggle-agent-lambda-plan-logs",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "kaggle-agent-lambda-plan-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_plan_role",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.lambda_logs"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_plan_perm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-lambda-plan-role:kaggle-agent-lambda-plan-perm",
            "name": "kaggle-agent-lambda-plan-perm",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"dynamodb:UpdateItem\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"}]}",
            "role": "kaggle-agent-lambda-plan-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.runs",
            "aws_iam_role.lambda_plan_role",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.lambda_plan_permissions"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_start_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-lambda-start-role:kaggle-agent-lambda-start-logs",
            "name": "kaggle-agent-lambda-start-logs",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "kaggle-agent-lambda-start-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_start_role",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.lambda_logs"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_start_perm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-lambda-start-role:kaggle-agent-lambda-start-perm",
            "name": "kaggle-agent-lambda-start-perm",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"dynamodb:PutItem\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-west-2:958923398556:table/Runs\"},{\"Action\":\"states:StartExecution\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow\"}]}",
            "role": "kaggle-agent-lambda-start-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cloudwatch_log_group.ecs",
            "aws_dynamodb_table.runs",
            "aws_ecr_repository.runner",
            "aws_ecs_cluster.this",
            "aws_ecs_task_definition.runner",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role",
            "aws_iam_role.lambda_mark_role",
            "aws_iam_role.lambda_plan_role",
            "aws_iam_role.lambda_start_role",
            "aws_iam_role.lambda_validate_role",
            "aws_iam_role.sfn_role",
            "aws_lambda_function.mark_succeeded",
            "aws_lambda_function.plan",
            "aws_lambda_function.validate_output",
            "aws_s3_bucket.artifacts",
            "aws_sfn_state_machine.kagent",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.archive_file.mark_zip",
            "data.archive_file.plan_zip",
            "data.archive_file.validate_zip",
            "data.aws_iam_policy_document.assume_ecs_tasks",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.assume_states",
            "data.aws_iam_policy_document.lambda_start_permissions",
            "data.aws_subnets.default_vpc_subnets",
            "data.aws_vpc.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_validate_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-lambda-validate-role:kaggle-agent-lambda-validate-logs",
            "name": "kaggle-agent-lambda-validate-logs",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "kaggle-agent-lambda-validate-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_validate_role",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.lambda_logs"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_validate_perm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-lambda-validate-role:kaggle-agent-lambda-validate-perm",
            "name": "kaggle-agent-lambda-validate-perm",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::kagent-artifacts/runs/*\"}]}",
            "role": "kaggle-agent-lambda-validate-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_validate_role",
            "aws_s3_bucket.artifacts",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.lambda_validate_permissions"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "sfn_perm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-sfn-role:kaggle-agent-sfn-perm",
            "name": "kaggle-agent-sfn-perm",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"lambda:InvokeFunction\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput\",\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan\",\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded\"]},{\"Action\":[\"ecs:RunTask\",\"ecs:DescribeTasks\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:ecs:us-west-2:958923398556:task-definition/kaggle-agent-runner:1\"},{\"Action\":\"iam:PassRole\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:iam::958923398556:role/kaggle-agent-ecs-task-role\",\"arn:aws:iam::958923398556:role/kaggle-agent-ecs-execution-role\"]},{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\",\"events:PutTargets\",\"events:PutRule\",\"events:DescribeRule\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "kaggle-agent-sfn-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cloudwatch_log_group.ecs",
            "aws_dynamodb_table.runs",
            "aws_ecr_repository.runner",
            "aws_ecs_task_definition.runner",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role",
            "aws_iam_role.lambda_mark_role",
            "aws_iam_role.lambda_plan_role",
            "aws_iam_role.lambda_validate_role",
            "aws_iam_role.sfn_role",
            "aws_lambda_function.mark_succeeded",
            "aws_lambda_function.plan",
            "aws_lambda_function.validate_output",
            "aws_s3_bucket.artifacts",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.archive_file.mark_zip",
            "data.archive_file.plan_zip",
            "data.archive_file.validate_zip",
            "data.aws_iam_policy_document.assume_ecs_tasks",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.assume_states",
            "data.aws_iam_policy_document.sfn_permissions"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_exec_attach",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kaggle-agent-ecs-execution-role-20251027201534812000000001",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "role": "kaggle-agent-ecs-execution-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.ecs_task_execution_role",
            "data.aws_iam_policy_document.assume_ecs_tasks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "mark_succeeded",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded",
            "code_sha256": "68mYxM12X5mWH5SQkqH5JUjF0cUB4RWUZxZvEAHKX4k=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "DDB_TABLE": "Runs",
                  "S3_BUCKET": "kagent-artifacts",
                  "SES_FROM": "tehreemcloud@gmail.com",
                  "SES_REGION": "us-west-2"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./build/mark_succeeded.zip",
            "function_name": "kaggle-agent-MarkSucceeded",
            "handler": "lambda_mark_succeeded.handler",
            "id": "kaggle-agent-MarkSucceeded",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-10-27T20:15:56.592+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/kaggle-agent-MarkSucceeded",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::958923398556:role/kaggle-agent-lambda-mark-role",
            "runtime": "python3.11",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 776,
            "tags": {},
            "tags_all": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.runs",
            "aws_iam_role.lambda_mark_role",
            "aws_s3_bucket.artifacts",
            "data.archive_file.mark_zip",
            "data.aws_iam_policy_document.assume_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "plan",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan",
            "code_sha256": "tchlhanjZz432yyVN5fnmaw8FIgNyTfbdL4/MM8J7Do=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "DDB_TABLE": "Runs"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./build/plan.zip",
            "function_name": "kaggle-agent-Plan",
            "handler": "lambda_plan.handler",
            "id": "kaggle-agent-Plan",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-10-27T21:55:11.000+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/kaggle-agent-Plan",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::958923398556:role/kaggle-agent-lambda-plan-role",
            "runtime": "python3.11",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 797,
            "tags": {},
            "tags_all": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.runs",
            "aws_iam_role.lambda_plan_role",
            "data.archive_file.plan_zip",
            "data.aws_iam_policy_document.assume_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "start_run",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-StartRun",
            "code_sha256": "YJeO5NpZmOyggf7JYglOyq/TRdzkzKyMKajutdWory4=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "DDB_TABLE": "Runs",
                  "SFN_ARN": "arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./build/start_run.zip",
            "function_name": "kaggle-agent-StartRun",
            "handler": "lambda_start_run.handler",
            "id": "kaggle-agent-StartRun",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-StartRun/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-10-27T20:23:56.649+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/kaggle-agent-StartRun",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-StartRun:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-StartRun:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::958923398556:role/kaggle-agent-lambda-start-role",
            "runtime": "python3.11",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 670,
            "tags": {},
            "tags_all": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_cloudwatch_log_group.ecs",
            "aws_dynamodb_table.runs",
            "aws_ecr_repository.runner",
            "aws_ecs_cluster.this",
            "aws_ecs_task_definition.runner",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role",
            "aws_iam_role.lambda_mark_role",
            "aws_iam_role.lambda_plan_role",
            "aws_iam_role.lambda_start_role",
            "aws_iam_role.lambda_validate_role",
            "aws_iam_role.sfn_role",
            "aws_lambda_function.mark_succeeded",
            "aws_lambda_function.plan",
            "aws_lambda_function.validate_output",
            "aws_s3_bucket.artifacts",
            "aws_sfn_state_machine.kagent",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.archive_file.mark_zip",
            "data.archive_file.plan_zip",
            "data.archive_file.start_zip",
            "data.archive_file.validate_zip",
            "data.aws_iam_policy_document.assume_ecs_tasks",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.assume_states",
            "data.aws_subnets.default_vpc_subnets",
            "data.aws_vpc.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "validate_output",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput",
            "code_sha256": "ybMSkRglE3s+1Ids22rWK1aJptJskXjTH7m/MLysbmY=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "S3_BUCKET": "kagent-artifacts"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./build/validate_output.zip",
            "function_name": "kaggle-agent-ValidateOutput",
            "handler": "lambda_validate_output.handler",
            "id": "kaggle-agent-ValidateOutput",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-10-27T20:15:44.587+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/kaggle-agent-ValidateOutput",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::958923398556:role/kaggle-agent-lambda-validate-role",
            "runtime": "python3.11",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 475,
            "tags": {},
            "tags_all": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_iam_role.lambda_validate_role",
            "aws_s3_bucket.artifacts",
            "data.archive_file.validate_zip",
            "data.aws_iam_policy_document.assume_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "apigw_invoke_start",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "kaggle-agent-StartRun",
            "function_url_auth_type": null,
            "id": "AllowAPIGWInvokeStart",
            "principal": "apigateway.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:us-west-2:958923398556:rjmzoavoel/*/*/run",
            "statement_id": "AllowAPIGWInvokeStart",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.http",
            "aws_cloudwatch_log_group.ecs",
            "aws_dynamodb_table.runs",
            "aws_ecr_repository.runner",
            "aws_ecs_cluster.this",
            "aws_ecs_task_definition.runner",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role",
            "aws_iam_role.lambda_mark_role",
            "aws_iam_role.lambda_plan_role",
            "aws_iam_role.lambda_start_role",
            "aws_iam_role.lambda_validate_role",
            "aws_iam_role.sfn_role",
            "aws_lambda_function.mark_succeeded",
            "aws_lambda_function.plan",
            "aws_lambda_function.start_run",
            "aws_lambda_function.validate_output",
            "aws_s3_bucket.artifacts",
            "aws_sfn_state_machine.kagent",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.archive_file.mark_zip",
            "data.archive_file.plan_zip",
            "data.archive_file.start_zip",
            "data.archive_file.validate_zip",
            "data.aws_iam_policy_document.assume_ecs_tasks",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.assume_states",
            "data.aws_subnets.default_vpc_subnets",
            "data.aws_vpc.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "artifacts",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::kagent-artifacts",
            "bucket": "kagent-artifacts",
            "bucket_domain_name": "kagent-artifacts.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "kagent-artifacts.s3.us-west-2.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "7f903fce5b5b69111dbbeaceb7d29ecc6e418aa5f643194641d8c061d38f5ddc",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3BJ6K6RIION7M",
            "id": "kagent-artifacts",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-west-2",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "artifacts",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": true,
            "block_public_policy": true,
            "bucket": "kagent-artifacts",
            "id": "kagent-artifacts",
            "ignore_public_acls": true,
            "restrict_public_buckets": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.artifacts"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_sfn_state_machine",
      "name": "kagent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow",
            "creation_date": "2025-10-27T20:23:56Z",
            "definition": "{\"Comment\":\"Kaggle Agent Orchestration\",\"StartAt\":\"Plan\",\"States\":{\"MarkSucceeded\":{\"End\":true,\"Resource\":\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-MarkSucceeded\",\"Type\":\"Task\"},\"Plan\":{\"Next\":\"RunTraining\",\"Resource\":\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-Plan\",\"ResultPath\":\"$\",\"Type\":\"Task\"},\"RunTraining\":{\"Next\":\"ValidateOutput\",\"Parameters\":{\"Cluster\":\"arn:aws:ecs:us-west-2:958923398556:cluster/kaggle-agent-cluster\",\"LaunchType\":\"FARGATE\",\"NetworkConfiguration\":{\"AwsvpcConfiguration\":{\"AssignPublicIp\":\"ENABLED\",\"Subnets\":[\"subnet-074058b75683e9e47\",\"subnet-062d15d643688fe16\",\"subnet-0246ec6f6461eac24\",\"subnet-0d44b2603cc66ce95\"]}},\"Overrides\":{\"ContainerOverrides\":[{\"Environment\":[{\"Name\":\"RUN_ID\",\"Value.$\":\"$.run_id\"},{\"Name\":\"URL\",\"Value.$\":\"$.url\"},{\"Name\":\"EMAIL\",\"Value.$\":\"$.email\"}],\"Name\":\"runner\"}]},\"TaskDefinition\":\"arn:aws:ecs:us-west-2:958923398556:task-definition/kaggle-agent-runner:1\"},\"Resource\":\"arn:aws:states:::ecs:runTask.sync\",\"ResultPath\":\"$.ecs_result\",\"Type\":\"Task\"},\"ValidateOutput\":{\"Next\":\"MarkSucceeded\",\"Resource\":\"arn:aws:lambda:us-west-2:958923398556:function:kaggle-agent-ValidateOutput\",\"ResultPath\":\"$\",\"Type\":\"Task\"}}}",
            "description": "",
            "encryption_configuration": [
              {
                "kms_data_key_reuse_period_seconds": 0,
                "kms_key_id": "",
                "type": "AWS_OWNED_KEY"
              }
            ],
            "id": "arn:aws:states:us-west-2:958923398556:stateMachine:kaggle-agent-workflow",
            "logging_configuration": [
              {
                "include_execution_data": false,
                "level": "OFF",
                "log_destination": ""
              }
            ],
            "name": "kaggle-agent-workflow",
            "name_prefix": "",
            "publish": false,
            "revision_id": "a86fddfa-85f5-4c6c-a508-34db9fdb0781",
            "role_arn": "arn:aws:iam::958923398556:role/kaggle-agent-sfn-role",
            "state_machine_version_arn": "",
            "status": "ACTIVE",
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "tracing_configuration": [
              {
                "enabled": false
              }
            ],
            "type": "STANDARD",
            "version_description": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_cloudwatch_log_group.ecs",
            "aws_dynamodb_table.runs",
            "aws_ecr_repository.runner",
            "aws_ecs_cluster.this",
            "aws_ecs_task_definition.runner",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role",
            "aws_iam_role.lambda_mark_role",
            "aws_iam_role.lambda_plan_role",
            "aws_iam_role.lambda_validate_role",
            "aws_iam_role.sfn_role",
            "aws_lambda_function.mark_succeeded",
            "aws_lambda_function.plan",
            "aws_lambda_function.validate_output",
            "aws_s3_bucket.artifacts",
            "aws_ssm_parameter.kaggle_key",
            "aws_ssm_parameter.kaggle_username",
            "data.archive_file.mark_zip",
            "data.archive_file.plan_zip",
            "data.archive_file.validate_zip",
            "data.aws_iam_policy_document.assume_ecs_tasks",
            "data.aws_iam_policy_document.assume_lambda",
            "data.aws_iam_policy_document.assume_states",
            "data.aws_subnets.default_vpc_subnets",
            "data.aws_vpc.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "kaggle_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/key",
            "data_type": "text",
            "description": "Kaggle API key",
            "has_value_wo": null,
            "id": "/kaggle/key",
            "insecure_value": null,
            "key_id": "alias/aws/ssm",
            "name": "/kaggle/key",
            "overwrite": null,
            "tags": {},
            "tags_all": {},
            "tier": "Standard",
            "type": "SecureString",
            "value": "1af3d51c70276ad65b78e55d80a721c2",
            "value_wo": null,
            "value_wo_version": null,
            "version": 1
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "value_wo"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "kaggle_username",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:us-west-2:958923398556:parameter/kaggle/username",
            "data_type": "text",
            "description": "Kaggle username",
            "has_value_wo": null,
            "id": "/kaggle/username",
            "insecure_value": null,
            "key_id": "alias/aws/ssm",
            "name": "/kaggle/username",
            "overwrite": null,
            "tags": {},
            "tags_all": {},
            "tier": "Standard",
            "type": "SecureString",
            "value": "tehreem",
            "value_wo": null,
            "value_wo_version": null,
            "version": 1
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "value_wo"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    }
  ],
  "check_results": null
}
